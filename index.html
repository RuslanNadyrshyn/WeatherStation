<!doctype html>
<html>

<head>
	<meta charset="utf-8"> 								<!-- Підключення кирилиці -->
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
	<link rel="stylesheet" href="public/css/style.css">		<!-- Підключення таблиці стилей-->
	<link rel="icon" type="image/x-icon" href="public/images/favicon.ico">
	<title>BME280 Nadyrshyn</title>
	<script src="public/js/request.js"></script>
	<script src="public/js/script.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/anchorme/2.0.0/node/utils.js"></script> 				<!-- Підключення додаткових бібліотек -->
	<script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.9.1/chart.min.js"></script>
	<script src="https://code.jquery.com/jquery-3.6.1.js"></script>
</head>

<body>													<!-- Блок відображення сторінки -->
	<header>
        <nav>
            <div class="weather-container">
				<div class="dropdown">
                    <a class="dropdown-title" id="location"></a>
                    <i class="fa fa-caret-down"></i>
                    <nav class="dropdown-content">
                        <a onclick="changeLocation('Київ')">Київ</a>
                        <a onclick="changeLocation('Львів')">Львів</a>
                        <a onclick="changeLocation('Харків')">Харків</a>
                    </nav>
                </div>
                <div class="dropdown-weather">
                    <div id="location-weather"> °С</div>
					<img class="weather-icon" id="weather-icon" src=""/>
                    <div class="weather-block">
						<table class="weather-table" cellspacing='0'>
							<thead>
								<tr><th>Погода</th></tr>
								<tr><th>Температура</th></tr>
								<tr><th>Відчувається як</th></tr>
								<tr><th>Тиск</th></tr>
								<tr><th>Вологість</th></tr>
								<tr><th>Хмарність</th></tr>
								<tr><th>Вітер</th></tr>
							</thead>
							<tbody>
								<tr><td id="weather"></td></tr>
								<tr><td id="temp-weather"></td></tr>
								<tr><td id="temp-feels-weather"></td></tr>
								<tr><td id="press-weather"></td></tr>
								<tr><td id="hum-weather"></td></tr>
								<tr><td id="cloud-weather"></td></tr>
								<tr><td id="wind-weather"></td></tr>
							</tbody>
						</table>
                        <a href="https://www.meteo.gov.ua/">Докладніше</a>
                    </div>
                </div>
				
            </div>
            <div class="nav-menu">						<!-- Блок навігації по сторінці-->
                <a href="#current">Дані датчика BME280</a>
                <a href="#db">База даних</a>
                <a href="#charts">Графіки</a>
            </div>
        </nav>
    </header>
	
	<div class="container">
		<h1 id="current">Дані датчика BME280</h1> <!-- Створення таблиці "Дані датчика BME280" -->
		<table class="current-table" cellspacing="0">
			<tr>
				<th>Температура</th>
				<th>Тиск</th>
				<th>Висота над рівнем моря</th>
				<th>Вологість</th>
			</tr>
			<tr>
				<td class="current-table-td" id="temp"></td>
				<td class="current-table-td" id="press"></td>
				<td class="current-table-td" id="alt"></td>
				<td class="current-table-td" id="hum"></td>
			</tr>
		</table>
		<h1 id="db">База даних</h1>
		<div class="navigator-container">
			<div class="order-menu">
				<div class="label-col">
					<label>Відображено</label>	
					<label>результатів:</label>
				</div>
				<div class="nav-counter" id="navCounter"></div>
			</div>
			<div class="order-menu">
				<div class="order">
					<label form="param">Сортувати по: </label>
					<select id="selectParam"></select>
				</div>
				<div class="order">
					<label form="order">Порядок:</label>
					<select id="selectOrder"></select>
				</div>
			</div>
		</div>
		<div class="db-table-container">
			<table id="dbTable"></table>
		</div>
		<!-- Вивід навігатора сторінок БД -->
		<div id="navPages"></div>
		<label style="float: right;">Сторінка
			<label id="page"></label>
			<label>/</label>
			<label id="numOfPages"></label>
		</label>
		<h1 id="charts">Графіки</h1>	
		<label class="chart-note">*Натисніть на графік для його збільшення</label>			
		<div class="chart-block"> 						<!--Вивід графіків -->
			<div class="chart-container" onclick="toggleChart({id})" id="container-temp"> 
				<label class="chart-label">Температура</label>
				<canvas id="chart-temp"></canvas>
			</div>
			<div class="chart-container" onclick="toggleChart({id})" id="container-press">
				<label class="chart-label">Тиск</label>
				<canvas id="chart-press"></canvas>
			</div>
			<div class="chart-container" onclick="toggleChart({id})" id="container-alt">
				<label class="chart-label">Висота над рівнем моря</label>
				<canvas id="chart-alt"></canvas>
			</div>
			<div class="chart-container" onclick="toggleChart({id})" id="container-hum">
				<label class="chart-label">Вологість</label>
				<canvas id="chart-hum"></canvas>
			</div>
		</div>
	</div> <!-- /container -->

</body>
</html>

<!-- Поле script -->
<script>
	var city = localStorage.getItem("city") != null ? 	// Тернарний оператор для зчитування з пам'яті браузера обраного міста
		localStorage.getItem("city") : "Київ"; 			// якщо міста немає в пам'яті, використовувати значення "Київ"		

	$(document).ready(function () { 					
		getCurrentData();		// Виклик функції динамічного оновлення інформації в таблиці "Дані датчика BME280"
		changeLocation(city);	// Виклик функції для створення таблиці з даними погоди									
		// updateTable();			// Виклик функції оновлення даних таблиці База даних
	});
</script>