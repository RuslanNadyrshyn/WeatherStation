<!doctype html>  <!-- html код -->
<html>
	<head>
        <meta charset="utf-8">					<!-- Підключення кирилиці -->
		<link rel="stylesheet" href="css/styles.css">
        <script src="js/chart.min.js"></script> <!-- Підключення додаткових бібліотек -->
        <script src="js/utils.js"></script>
		<script src="js/jquery.js"></script>
        <script src="js/script.js"></script>
	</head>

	<body>				<!-- Колір фону сторінки -->
        <div class="container">
<!-- Створення таблиці "Дані датчика BME280" -->
        <h1 id="myHeader">Hello World!</h1>
        <button onclick="updateTable()">Change Table</button>

        <div class="db-table-container">
            <div id="myDiv"></div>
        </div>

        <div class="db-table-container">
            <table id="dbTable"></table>
        </div>

        <script>
            function printRow(object) {
                var $line = $("<tr></tr>");
                for (const key in object)
                    if (Object.hasOwnProperty.call(object, key))
                        $line.append($("<td></td>").html(object[key]));
                return $line;
            }

            var db = [];
            for (let i = 0; i < 15; i++) {
                db.push({
                    id: i,
                    date: "date"+i,
                    time: "time"+i,
                    temp: "temp"+i,
                    press: "press"+i,
                    alt: "alt"+i,
                    hum: "hum"+i
                })
            }

            function fillInTable (data) {
                var $table = $("<table></table>");
                for (let index = 0; index < data.length; index++) {
                    var element = data[index];
                    var $line = $("<tr></tr>");
                    console.log();
                    $table.append(printRow(element));
                }
                $table.appendTo($("#myDiv"));
            }
            fillInTable(db);

            function updateTable() {
                for (let i = 0; i < 15; i++) {
                    db[i].id=i+5;
                    db[i].date="date"+i+5;
                }
                var $newTable = $("<table></table>");
                for (let index = 0; index < db.length; index++) {
                    var element = db[index];
                    var $line = $("<tr></tr>");
                    $newTable.append(printRow(element));
                }

                $newTable.replaceAll($("#myDiv"));
            }

            function printRow1(data, isHeader) {
                var row = "";
                row += "<tr>";
                for (let i = 0; i < data.length; i++) {
                    if (isHeader) row += "<th>"+data[i]+"</th>";
                    else row += "<td>"+data[i]+"</td>";
                }
                row += "</tr>";
                console.log("row", row);
                return row;
            }

            function fillInTable1() {
                var html = "";
                var dbTableHeader = ["ID", "Дата", "Час", "Температура", "Тиск", "Висота", "Вологість"];
                html+=printRow1(dbTableHeader, true);
                console.log(html);
                for (let index = 0; index < db.length; index++) {
                    html+=printRow1([db[index].id, db[index].date, db[index].time, db[index].temp, db[index].press, db[index].alt, db[index].hum], false);
                }
                document.getElementById("dbTable").innerHTML = html;
            }
        </script>
		<h1>Дані датчика BME280</h1>
		<table class="current-table" cellspacing="0">
		    <tr>
                <th>Температура</th>
                <th>Тиск</th>
                <th>Висота над рівнем моря</th>
                <th>Вологість</th>
            </tr>
			<tr>
                <td class="current-table-td">21.5</td>
			    <td class="current-table-td">1001 ГПа</td>
			    <td class="current-table-td">800 м</td>
			    <td class="current-table-td">67 %</td> 
            </tr>	
		</table>
    
		<h1>База даних</h2>
        <div class="navigator-block">
            Сторінка: 
            <div class="navigator-item" onclick="window.location='index.php?count=20';">1</div>
            <div class="navigator-item" onclick="window.location='index.php?count=20';">2</div>
            <div class="navigator-item" onclick="window.location='index.php?count=20';">3</div>
            <div class="navigator-item" onclick="window.location='index.php?count=20';">5</div>
        </div>
<!-- Створення таблиці "База даних"-->
        <div class="db-table-container">
            <table cellspacing="0">
                <tr>		<!-- Фон першого рядка таблиці-->
                    <th>ID</th>
                    <th>Дата</th>
                    <th>Час</th>
                    <th>Температура</th>
                    <th>Тиск</th>
                    <th>Висота</th>
                    <th>Вологість</th>
                </tr>
                <tr>
                    <td>1</td>
                    <td>12:06:2022</td>
                    <td>23:23:09</td>
                    <td>23.5 `</td>
                    <td>1011 ГПа</td>
                    <td>1000 v</td>
                    <td>61 %</td>
                </tr>
                <tr>
                    <td>1</td>
                    <td>12:11:2022</td>
                    <td>23:11:01</td>
                    <td>23.5 `</td>
                    <td>1011 ГПа</td>
                    <td>1000 v</td>
                    <td>61 %</td>
                </tr>
                <tr>
                    <td>1</td>
                    <td>12:11:2022</td>
                    <td>23:11:01</td>
                    <td>23.5 `</td>
                    <td>1011 ГПа</td>
                    <td>1000 v</td>
                    <td>61 %</td>
                </tr>
                <tr>
                    <td>1</td>
                    <td>12:11:2022</td>
                    <td>23:11:01</td>
                    <td>23.5 `</td>
                    <td>1011 ГПа</td>
                    <td>1000 v</td>
                    <td>61 %</td>
                </tr>
                <tr>
                    <td>1</td>
                    <td>12:11:2022</td>
                    <td>23:11:01</td>
                    <td>23.5 `</td>
                    <td>1011 ГПа</td>
                    <td>1000 v</td>
                    <td>61 %</td>
                </tr>
                <tr>
                    <td>1</td>
                    <td>12:11:2022</td>
                    <td>23:11:01</td>
                    <td>23.5 `</td>
                    <td>1011 ГПа</td>
                    <td>1000 v</td>
                    <td>61 %</td>
                </tr>
                <tr>
                    <td>1</td>
                    <td>12:11:2022</td>
                    <td>23:11:01</td>
                    <td>23.5 `</td>
                    <td>1011 ГПа</td>
                    <td>1000 v</td>
                    <td>61 %</td>
                </tr>
                <tr>
                    <td>1</td>
                    <td>12:11:2022</td>
                    <td>23:11:01</td>
                    <td>23.5 `</td>
                    <td>1011 ГПа</td>
                    <td>1000 v</td>
                    <td>61 %</td>
                </tr>
                <tr>
                    <td>1</td>
                    <td>12:11:2022</td>
                    <td>23:11:01</td>
                    <td>23.5 `</td>
                    <td>1011 ГПа</td>
                    <td>1000 v</td>
                    <td>61 %</td>
                </tr>
                <tr>
                    <td>1</td>
                    <td>12:11:2022</td>
                    <td>23:11:01</td>
                    <td>23.5 `</td>
                    <td>1011 ГПа</td>
                    <td>1000 v</td>
                    <td>61 %</td>
                </tr>
                <tr>
                    <td>1</td>
                    <td>12:11:2022</td>
                    <td>23:11:01</td>
                    <td>23.5 `</td>
                    <td>1011 ГПа</td>
                    <td>1000 v</td>
                    <td>61 %</td>
                </tr>
                <tr>
                    <td>1</td>
                    <td>12:11:2022</td>
                    <td>23:11:01</td>
                    <td>23.5 `</td>
                    <td>1011 ГПа</td>
                    <td>1000 v</td>
                    <td>61 %</td>
                </tr>
                <tr>
                    <td>1</td>
                    <td>12:11:2022</td>
                    <td>23:11:01</td>
                    <td>23.5 `</td>
                    <td>1011 ГПа</td>
                    <td>1000 v</td>
                    <td>61 %</td>
                </tr>
                <tr>
                    <td>1</td>
                    <td>12:11:2022</td>
                    <td>23:11:01</td>
                    <td>23.5 `</td>
                    <td>1011 ГПа</td>
                    <td>1000 v</td>
                    <td>61 %</td>
                </tr>
                <tr>
                    <td>1</td>
                    <td>12:11:2022</td>
                    <td>23:11:01</td>
                    <td>23.5 `</td>
                    <td>1011 ГПа</td>
                    <td>1000 v</td>
                    <td>61 %</td>
                </tr>
                <tr>
                    <td>1</td>
                    <td>12:11:2022</td>
                    <td>23:11:01</td>
                    <td>23.5 `</td>
                    <td>1011 ГПа</td>
                    <td>1000 v</td>
                    <td>61 %</td>
                </tr>
                <tr>
                    <td>1</td>
                    <td>12:11:2022</td>
                    <td>23:11:01</td>
                    <td>23.5 `</td>
                    <td>1011 ГПа</td>
                    <td>1000 v</td>
                    <td>61 %</td>
                </tr>
            </table>
        </div>
        <div class="navigator-block">
            <div class="navigator-item" onclick="window.location='index.php?count=20';">20</div>
            <div class="navigator-item" onclick="window.location='index.php?count=50';">50</div>
            <div class="navigator-item" onclick="window.location='index.php?count=100';">100</div>
            <div class="navigator-item" onclick="window.location='index.php?count=';">Всі()</div>
        </div>
		<caption><h2>Графіки</h2></caption> 

		<div class="charts-block"> 	<!--Ініціалізація графіків  -->
			<div class="chart-container"> 
				<canvas id="chart-temp"></canvas>
			</div>
			<div class="chart-container">
				<canvas id="chart-press"></canvas>
			</div>
			<div class="chart-container">
				<canvas id="chart-alt"></canvas>
			</div>
			<div class="chart-container">
				<canvas id="chart-hum"></canvas>
			</div> 
		</div>
        <script>
            var arr = [];
            for (let i = 0; i < 100; i++) {
                arr.push(i);
            }
            function createConfig(data, text, colorName) {
                console.log(arr);
                return {
                    type: 'line',
                    data: {
                        labels: arr,
                        datasets: [{
                            label: text,
                            data: data,
                            backgroundColor: colorName,
                            borderColor: colorName,
                            borderWidth: 1
                        }]
                    },
                    options: {
                        responsive: true
                    }
                };
            }
    
            window.onload = function() {
                [{
                    id: 'chart-temp',	// Графік температури
                    color: 'yellow',
                    text: 'Температура',
                    data: arr
                }, {
                    id: 'chart-press',	// Графік тиску
                    color: 'red',
                    text: 'Тиск',
                    data: arr
                }, {
                    id: 'chart-alt', 	// Графік Висоти
                    color: 'green',
                    text: 'Висота над рівнем моря',
                    data: arr
                }, {
                    id: 'chart-hum', 	// Графік вологості
                    color: 'blue',
                    text: 'Вологість',
                    data: arr
                }].forEach(function(details) {
                    var ctx = document.getElementById(details.id).getContext('2d');
                    var config = createConfig(details.data, details.text, details.color);
                    new Chart(ctx, config);
                });
            };
            
        </script>	
	</body>
</html>
