<!doctype html>
<html>

<head>
	<meta charset="utf-8"> 								<!-- Підключення кирилиці -->
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
	<link rel="stylesheet" href="public/css/style.css">		<!-- Підключення таблиці стилей-->
	<link rel="icon" type="image/png" href="public/img/04n.png"/>
	<title>BME280 Nadyrshyn</title>
	<script src="config/config.js"></script>
	<script src="public/js/request.js"></script>
	<script src="public/js/script.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/anchorme/2.0.0/node/utils.js"></script> 		<!-- Підключення додаткових бібліотек -->
	<script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.9.1/chart.min.js"></script>
	<script src="https://code.jquery.com/jquery-3.6.1.js"></script>
</head>

<body>						<!-- Блок відображення сторінки -->	
	<div class="background">
		<div class="background-img"></div>
	</div>
	<header>
        <nav class="header-nav">
            <div class="weather-container">
				<div class="dropdown">
                    <a class="dropdown-title" id="location"></a>
                    <i class="fa fa-caret-down"></i>
                    <nav class="dropdown-content">
                        <a onclick="changeLocation('Київ')">Київ</a>
                        <a onclick="changeLocation('Львів')">Львів</a>
                        <a onclick="changeLocation('Харків')">Харків</a>
						<a onclick="changeLocation('Дніпро')">Дніпро</a>
                        <a onclick="changeLocation('Тернопіль')">Тернопіль</a>
                        <a onclick="changeLocation('Івано-Франківськ')">Івано-Франківськ</a>
						<a onclick="changeLocation('Вінниця')">Вінниця</a>
                        <a onclick="changeLocation('Запоріжжя')">Запоріжжя</a>
                        <a onclick="changeLocation('Хмельницький')">Хмельницький</a>
						<a onclick="changeLocation('Одеса')">Одеса</a>
                        <a onclick="changeLocation('Луцьк')">Луцьк</a>
                        <a onclick="changeLocation('Рівне')">Рівне</a>
						<a onclick="changeLocation('Полтава')">Полтава</a>
                        <a onclick="changeLocation('Черкаси')">Черкаси</a>
                        <a onclick="changeLocation('Житомир')">Житомир</a>
						<a onclick="changeLocation('Кропивницький')">Кропивницький</a>
                        <a onclick="changeLocation('Чернівці')">Чернівці</a>
                        <a onclick="changeLocation('Миколаїв')">Миколаїв</a>
						<a onclick="changeLocation('Чернігів')">Чернігів</a>
                        <a onclick="changeLocation('Суми')">Суми</a>
                        <a onclick="changeLocation('Ужгород')">Ужгород</a>
						<a onclick="changeLocation('Херсон')">Херсон</a>
						<a onclick="changeLocation('Донецьк')">Донецьк</a>
                        <a onclick="changeLocation('Луганськ')">Луганськ</a>
                    </nav>
                </div>
                <div class="dropdown-weather">
                    <div id="location-weather"> °С</div>
					<img class="weather-icon" id="weather-icon" src=""/>
                    <div class="weather-block">
						<table class="weather-table" cellspacing='0'>
							<thead>
								<tr><th>Погода</th></tr>
								<tr><th>Температура</th></tr>
								<tr><th>Відчувається як</th></tr>
								<tr><th>Тиск</th></tr>
								<tr><th>Вологість</th></tr>
								<tr><th>Хмарність</th></tr>
								<tr><th>Вітер</th></tr>
							</thead>
							<tbody>
								<tr><td id="weather"></td></tr>
								<tr><td id="temp-weather"></td></tr>
								<tr><td id="temp-feels-weather"></td></tr>
								<tr><td id="press-weather"></td></tr>
								<tr><td id="hum-weather"></td></tr>
								<tr><td id="cloud-weather"></td></tr>
								<tr><td id="wind-weather"></td></tr>
							</tbody>
						</table>
                        <a href="https://www.meteo.gov.ua/">Докладніше</a>
                    </div>
                </div>
				
            </div>
            <div class="nav-menu">						<!-- Блок навігації по сторінці-->
                <a href="#current">Дані датчика BME280</a>
                <a href="#db">База даних</a>
                <a href="#charts">Графіки</a>
            </div>
        </nav>
    </header>
	
	<div class="container" id>
		<h1 id="current">Дані датчика BME280</h1> <!-- Створення таблиці "Дані датчика BME280" -->
		<nav>
			<label id="time-current"></label>
			<div>
				<label id="max-count"></label>
				<label>Змінити: </label>
				<select id="select-max-count"></select>
			</div>
		</nav>
		<table class="current-table" cellspacing="0">
			<tr>
				<th>Температура</th>
				<th>Тиск</th>
				<th>Висота над рівнем моря</th>
				<th>Вологість</th>
			</tr>
			<tr>
				<td class="current-table-td" id="temp"></td>
				<td class="current-table-td" id="press"></td>
				<td class="current-table-td" id="alt"></td>
				<td class="current-table-td" id="hum"></td>
			</tr>
		</table>
		<div id="post"></div>
		<h1 id="db">База даних</h1>
		<div class="navigator-container">
			<div class="order-menu">
				<div class="label-col">
					<label>Відображено </label>	
					<label>результатів:</label>
				</div>
				<div class="nav-counter" id="navCounter"></div>
			</div>
			<div class="order-menu">
				<div class="order">
					<label form="param">Сортувати по: </label>
					<select id="selectParam"></select>
				</div>
				<div class="order">
					<label form="order">Порядок:</label>
					<select id="selectOrder"></select>
				</div>
			</div>
		</div>
		<div class="db-table-container">
			<table id="dbTable"></table>
		</div>
		<!-- Вивід навігатора сторінок БД -->
		<div id="navPages"></div>
		<label style="float: right;">Сторінка
			<label id="page"></label>
			<label>/</label>
			<label id="numOfPages"></label>
		</label>
		<h1 id="charts">Графіки</h1>	
		<label class="chart-note">*Натисніть на графік для його збільшення</label>			
		<div class="chart-block"> 						<!--Вивід графіків -->
			<div class="chart-container" onclick="toggleChart({id})" id="container-temp"> 
				<label class="chart-label">Температура</label>
				<canvas id="chart-temp"></canvas>
			</div>
			<div class="chart-container" onclick="toggleChart({id})" id="container-press">
				<label class="chart-label">Тиск</label>
				<canvas id="chart-press"></canvas>
			</div>
			<div class="chart-container" onclick="toggleChart({id})" id="container-alt">
				<label class="chart-label">Висота над рівнем моря</label>
				<canvas id="chart-alt"></canvas>
			</div>
			<div class="chart-container" onclick="toggleChart({id})" id="container-hum">
				<label class="chart-label">Вологість</label>
				<canvas id="chart-hum"></canvas>
			</div>
		</div>
	</div> <!-- /container -->

</body>
</html>

<!-- Поле script -->
<script>
	localStorage.setItem("ServerError", "");
	$(document).ready(function () { 	
		var items = getItems();
		const MAX_COUNTS = [
			{ value: "Завжди", text: 1 },
			{ value: "5", text: 5 },
			{ value: "10", text: 10 },
			{ value: "20", text: 20 },
			{ value: "50", text: 50 },
			{ value: "100", text: 100 }
		];

		// getCurrentData();		// Виклик функції динамічного оновлення інформації в таблиці "Дані датчика BME280"
		changeLocation(items.city);	// Виклик функції для створення таблиці з даними погоди	
		printNavCounter(items.count, items.page);
		printSelectList("param", OPTIONS, items.param, "#selectParam", updateTableOnSelect);
		printSelectList("order", ORDERS, items.order, "#selectOrder", updateTableOnSelect);
		
		// printSelectList("max-count", MAX_COUNTS, 10, "#max-count", updateSelect);
		updateTable();			// Виклик функції оновлення даних таблиці База даних
	});
</script>